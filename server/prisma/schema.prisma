generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = "file:./dev.db"
}


model CmcLatest {  
  id          Int     @id @default(autoincrement()) 
  cmcid       Int
  price       Float
  p1h_change  Float
  p24h_change Float
  p7d_change  Float
  p30d_change Float

  ticker      Ticker  @relation(fields: [cmcid], references: [cmcid])
  

}

model Ticker {  
  cmcid       Int         @id
  name        String
  cmcticker   String @unique
  krakenticker String @unique

  cmcLatests  CmcLatest[]  // one-to-many relation
  krakenCandle KrakenCandle[] @relation("TickerToKraken")
  
}



model KrakenCandle {
  id    Int    @id @default(autoincrement())
  timestamp Int
  ticker String 
  name String  
  price Float
  volume Float
  ema21 Float
  ema50 Float
  ema200 Float
  rsi14 Float
  last1change Float
  last77change Float
  last144change Float
  last288change Float
  trigger Boolean

  tickerRel Ticker? @relation("TickerToKraken", fields: [ticker], references: [krakenticker])
  @@unique([timestamp, ticker])

  

}
